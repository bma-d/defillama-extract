# Switchboard Oracle Data Extraction System - Implementation Specification (Revised v1)

## Table of Contents

- [Switchboard Oracle Data Extraction System - Implementation Specification (Revised v1)](#table-of-contents)
  - [Document Purpose](./document-purpose.md)
    - [Revision Notes (v1.1.0)](./document-purpose.md#revision-notes-v110)
  - [Table of Contents](./table-of-contents.md)
  - [1. System Overview](./1-system-overview.md)
    - [1.1 Objective](./1-system-overview.md#11-objective)
    - [1.2 Key Features](./1-system-overview.md#12-key-features)
    - [1.3 Data Flow Overview](./1-system-overview.md#13-data-flow-overview)
    - [1.4 Update Cycle](./1-system-overview.md#14-update-cycle)
  - [2. Architecture Design](./2-architecture-design.md)
    - [2.1 Package Structure](./2-architecture-design.md#21-package-structure)
    - [2.2 Component Responsibilities](./2-architecture-design.md#22-component-responsibilities)
    - [2.3 Dependency Graph](./2-architecture-design.md#23-dependency-graph)
  - [3. Data Sources & API Specifications](./3-data-sources-api-specifications.md)
    - [3.1 Primary API Endpoints](./3-data-sources-api-specifications.md#31-primary-api-endpoints)
      - [3.1.1 Oracle Data Endpoint](./3-data-sources-api-specifications.md#311-oracle-data-endpoint)
      - [3.1.2 Protocol Metadata Endpoint](./3-data-sources-api-specifications.md#312-protocol-metadata-endpoint)
    - [3.2 API Response Timing](./3-data-sources-api-specifications.md#32-api-response-timing)
    - [3.3 Switchboard-Specific Data](./3-data-sources-api-specifications.md#33-switchboard-specific-data)
  - [4. Data Models & Structures](./4-data-models-structures.md)
    - [4.1 API Response Models](./4-data-models-structures.md#41-api-response-models)
      - [4.1.1 Oracle API Response](./4-data-models-structures.md#411-oracle-api-response)
      - [4.1.2 Protocol API Response](./4-data-models-structures.md#412-protocol-api-response)
    - [4.2 Internal Models](./4-data-models-structures.md#42-internal-models)
      - [4.2.1 Aggregated Protocol](./4-data-models-structures.md#421-aggregated-protocol)
      - [4.2.2 Chain Breakdown](./4-data-models-structures.md#422-chain-breakdown)
      - [4.2.3 Snapshot](./4-data-models-structures.md#423-snapshot)
      - [4.2.4 Metrics](./4-data-models-structures.md#424-metrics)
    - [4.3 Custom Error Types](./4-data-models-structures.md#43-custom-error-types)
    - [4.4 Output Models](./4-data-models-structures.md#44-output-models)
      - [4.4.1 Full Output](./4-data-models-structures.md#441-full-output)
      - [4.4.2 State Model](./4-data-models-structures.md#442-state-model)
  - [5. Core Components](./5-core-components.md)
    - [5.1 HTTP Client Component](./5-core-components.md#51-http-client-component)
      - [5.1.1 Complete Implementation](./5-core-components.md#511-complete-implementation)
    - [5.2 Aggregator Component Interface](./5-core-components.md#52-aggregator-component-interface)
  - [6. Incremental Update Strategy](./6-incremental-update-strategy.md)
    - [6.1 Overview](./6-incremental-update-strategy.md#61-overview)
    - [6.2 State Manager Implementation](./6-incremental-update-strategy.md#62-state-manager-implementation)
    - [6.3 History Manager Implementation](./6-incremental-update-strategy.md#63-history-manager-implementation)
  - [7. Custom Aggregation Logic (Go Implementation)](./7-custom-aggregation-logic-go-implementation.md)
    - [7.1 Metric Calculations](./7-custom-aggregation-logic-go-implementation.md#71-metric-calculations)
    - [7.2 Protocol Filtering](./7-custom-aggregation-logic-go-implementation.md#72-protocol-filtering)
    - [7.3 Breakdown Calculations](./7-custom-aggregation-logic-go-implementation.md#73-breakdown-calculations)
  - [8. Storage & Caching](./8-storage-caching.md)
    - [8.1 Atomic File Writer](./8-storage-caching.md#81-atomic-file-writer)
  - [9. Error Handling & Resilience](./9-error-handling-resilience.md)
    - [9.1 Error Wrapping Patterns](./9-error-handling-resilience.md#91-error-wrapping-patterns)
    - [9.2 Retry Configuration](./9-error-handling-resilience.md#92-retry-configuration)
    - [9.3 Graceful Degradation Table](./9-error-handling-resilience.md#93-graceful-degradation-table)
  - [10. Configuration & Environment](./10-configuration-environment.md)
    - [10.1 Configuration File (YAML)](./10-configuration-environment.md#101-configuration-file-yaml)
    - [10.2 Configuration Loading](./10-configuration-environment.md#102-configuration-loading)
  - [11. Testing Strategy (Complete Implementation)](./11-testing-strategy-complete-implementation.md)
    - [11.1 Table-Driven Tests for Metrics](./11-testing-strategy-complete-implementation.md#111-table-driven-tests-for-metrics)
    - [11.2 Mock API Client for Testing](./11-testing-strategy-complete-implementation.md#112-mock-api-client-for-testing)
    - [11.3 Integration Test Example](./11-testing-strategy-complete-implementation.md#113-integration-test-example)
    - [11.4 Test Fixtures](./11-testing-strategy-complete-implementation.md#114-test-fixtures)
    - [11.5 Benchmark Tests](./11-testing-strategy-complete-implementation.md#115-benchmark-tests)
  - [12. Deployment Considerations](./12-deployment-considerations.md)
    - [12.1 Docker Configuration](./12-deployment-considerations.md#121-docker-configuration)
    - [12.2 Docker Compose](./12-deployment-considerations.md#122-docker-compose)
  - [13. API Response Examples](./13-api-response-examples.md)
  - [14. Implementation Checklist](./14-implementation-checklist.md)
    - [14.1 Phase 1: Foundation](./14-implementation-checklist.md#141-phase-1-foundation)
    - [14.2 Phase 2: API Integration](./14-implementation-checklist.md#142-phase-2-api-integration)
    - [14.3 Phase 3: Aggregation Logic](./14-implementation-checklist.md#143-phase-3-aggregation-logic)
    - [14.4 Phase 4: Storage & State](./14-implementation-checklist.md#144-phase-4-storage-state)
    - [14.5 Phase 5: Orchestration](./14-implementation-checklist.md#145-phase-5-orchestration)
    - [14.6 Phase 6: Production Readiness](./14-implementation-checklist.md#146-phase-6-production-readiness)
  - [15. Go-Specific Patterns & Idioms](./15-go-specific-patterns-idioms.md)
    - [15.1 Structured Logging with slog (Go 1.23+)](./15-go-specific-patterns-idioms.md#151-structured-logging-with-slog-go-123)
    - [15.2 Context Propagation](./15-go-specific-patterns-idioms.md#152-context-propagation)
    - [15.3 Dependency Injection Pattern](./15-go-specific-patterns-idioms.md#153-dependency-injection-pattern)
  - [16. Operational Concerns](./16-operational-concerns.md)
    - [16.1 Graceful Shutdown](./16-operational-concerns.md#161-graceful-shutdown)
    - [16.2 Prometheus Metrics](./16-operational-concerns.md#162-prometheus-metrics)
    - [16.3 Health Check Endpoint](./16-operational-concerns.md#163-health-check-endpoint)
    - [16.4 API Schema Change Detection](./16-operational-concerns.md#164-api-schema-change-detection)
  - [17. Complete Main.go Implementation](./17-complete-maingo-implementation.md)
  - [Appendix A: Go Dependencies](./appendix-a-go-dependencies.md)
  - [Appendix B: Quick Reference](./appendix-b-quick-reference.md)
    - [B.1 API Endpoints](./appendix-b-quick-reference.md#b1-api-endpoints)
    - [B.2 Key Constants](./appendix-b-quick-reference.md#b2-key-constants)
    - [B.3 Output Files](./appendix-b-quick-reference.md#b3-output-files)
    - [Changelog](./appendix-b-quick-reference.md#changelog)
